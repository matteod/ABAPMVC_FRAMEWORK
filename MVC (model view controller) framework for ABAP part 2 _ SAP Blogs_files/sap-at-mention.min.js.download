"use strict";var satmProlifeLinkUserMapping=[];function satmProcessAtMentions(t,e){if(t){var n=[];t.forEach(function(t){n=n.concat(satmGetMentionURLs(t,e))}),satmProcessAtMentionURLs(n,t)}}function satmProcessChangedElement(t,e){var n;(n=t.matches("a[href*='"+e+"']")?[t]:t.querySelectorAll("a[href*='"+e+"']"))&&0<n.length&&n.forEach(function(t){var e=satmGetURLWithoutProtocol(t.getAttribute("href")),n=satmProlifeLinkUserMapping[e];n?t.text!=n&&(t.text=n):satmProcessAtMentionLink(t)})}function satmGetMentionURLs(t,e){if(e)return jQuery(t+" a[href*='"+e+"']").map(function(){return this.protocol="https",this.href}).get()}function satmProcessAtMentionURLs(t,s){jQuery.unique(t).forEach(function(n){jQuery.ajax(n,{success:function(t){var e=satmGetUserDisplayNameFromHtml(t);e&&satmChangeMentionedUserLinkText(n,e,s)}})})}function satmProcessAtMentionLink(n){n.protocol="https";var s=n.getAttribute("href");jQuery.ajax(s,{success:function(t){var e=satmGetUserDisplayNameFromHtml(t);(satmProlifeLinkUserMapping[satmGetURLWithoutProtocol(s)]=e)&&(n.text=e)}})}function satmGetUserDisplayNameFromHtml(t){var e=/<meta\s+content='([^']+)'\s+property='og:title'>/g.exec(t);if(e&&e[1]){var n=document.createElement("div");return n.innerHTML=e[1],n.innerText}return null}function satmChangeMentionedUserLinkText(t,e,n){var s=satmGetURLWithoutProtocol(t);satmProlifeLinkUserMapping[s]=e,n.forEach(function(t){jQuery(t+" a[href$='"+s+"']").each(function(){jQuery(this).text(e)})})}function satmGetURLWithoutProtocol(t){return t.replace(/^https?:\/\//g,"")}jQuery(document).ready(function(){if(satmProcessAtMentions(satmContentSelectors,satmProfileBaseUrl),"undefined"!=typeof satmChangeableElementsSelectors&&satmChangeableElementsSelectors&&satmChangeableElementsSelectors.forEach(function(t){jQuery(t).on("DOMNodeInserted",function(t){satmProcessChangedElement(t.target,satmProfileBaseUrl)})}),"undefined"!=typeof satmPotentialElements&&satmPotentialElements)for(var e in satmPotentialElements){var t=satmPotentialElements[e];jQuery(t.staticAncestor).on("DOMNodeInserted",t.dynamicAncestor+":not(.satm-live)",function(t){t.target.querySelectorAll(e).forEach(function(e){satmProcessChangedElement(e,satmProfileBaseUrl),jQuery(e).on("DOMNodeInserted",function(t){satmProcessChangedElement(e,satmProfileBaseUrl)})}),jQuery(this).addClass("satm-live")})}});